{"version":3,"file":"js/app.d8f52438.js","mappings":"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","sources":["webpack://jihei5/./src/App.vue","webpack://jihei5/./src/components/GameTable.vue","webpack://jihei5/./src/game/card.js","webpack://jihei5/./src/game/rules.js","webpack://jihei5/./src/game/ai.js","webpack://jihei5/./src/components/CardHand.vue","webpack://jihei5/./src/components/CardHand.vue?010b","webpack://jihei5/./src/components/Recorder.vue","webpack://jihei5/./src/game/recorder.js","webpack://jihei5/./src/components/Recorder.vue?cc80","webpack://jihei5/./src/components/GameTable.vue?dac4","webpack://jihei5/./src/components/TestTable.vue","webpack://jihei5/./src/components/TestTable.vue?0e23","webpack://jihei5/./src/App.vue?c03f","webpack://jihei5/./src/main.js","webpack://jihei5/webpack/bootstrap","webpack://jihei5/webpack/runtime/chunk loaded","webpack://jihei5/webpack/runtime/compat get default export","webpack://jihei5/webpack/runtime/define property getters","webpack://jihei5/webpack/runtime/global","webpack://jihei5/webpack/runtime/hasOwnProperty shorthand","webpack://jihei5/webpack/runtime/jsonp chunk loading","webpack://jihei5/webpack/startup"],"sourcesContent":["<template>\n  <div id=\"app\">\n    <button v-if=\"!showGame\" @click=\"showGame = true\">开始</button>\n    <button v-if=\"!showTest\" @click=\"showTest = true\">测试</button>\n    <GameTable v-if=\"showGame\" />\n    <TestTable v-if=\"showTest\" />\n  </div>\n</template>\n\n<script>\nimport GameTable from './components/GameTable.vue'\nimport TestTable from './components/TestTable.vue';\n\nexport default {\n  name: 'App',\n  components: {\n    GameTable,\n    TestTable\n  },\n  data() {\n    return {\n      showGame: false,\n      showTest: false\n    }\n  }\n}\n</script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n</style>\n","<template>\r\n  <div class=\"game-table\">\r\n    <!-- 新增顶部容器，包含记牌器和玩家卡片 -->\r\n    <div class=\"top-container\">\r\n      <!-- 记牌器放最上方 -->\r\n      <div class=\"recorder-top-bar\">\r\n        <div class=\"recorder-top-inner\">\r\n          <Recorder :players=\"players\" :cardOrder=\"cardOrder\" />\r\n        </div>\r\n      </div>\r\n      <div class=\"ai-row-on-top\">\r\n        <!-- 所有玩家横向并排标签卡，悬浮在记牌器同一层 -->\r\n        <div class=\"ai-block-wrap\">\r\n          <div\r\n            v-for=\"(player, idx) in players\"\r\n            :key=\"idx\"\r\n            :class=\"['player-tab', { active: currentTurn === idx, me: idx === 0 }]\"\r\n            @click=\"toggleHand(idx)\"\r\n          >\r\n            <span class=\"player-label\">{{ idx === 0 ? '我' : player.name }}</span>\r\n            <span class=\"player-hand-count\">剩余：{{ player.hand.length }} 张</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"table-center\">\r\n      <div class=\"current-play history-scroll\" ref=\"historyScroll\">\r\n        <div>出牌记录：</div>\r\n        <div v-if=\"historyPlays.length\" ref=\"historyList\" class=\"history-list\">\r\n          <div v-for=\"(item, idx) in historyPlays\" :key=\"idx\" class=\"history-item\">\r\n            <span class=\"history-name\">{{ item.name }}：</span>\r\n            <span v-if=\"item.cards.length\" class=\"history-cards\">\r\n              <span v-for=\"(c, cidx) in item.cards\" :key=\"cidx\" :class=\"['card-item', getSuitClass(c.suit)]\">\r\n                <span class=\"card-corner top-left\">\r\n                  <span class=\"corner-value\" :class=\"getSuitClass(c.suit)\">{{ c.value }}</span>\r\n                  <span class=\"corner-suit\" :class=\"getSuitClass(c.suit)\">{{ c.suit }}</span>\r\n                </span>\r\n                <span class=\"card-corner bottom-right\">\r\n                  <span class=\"corner-value\" :class=\"getSuitClass(c.suit)\">{{ c.value }}</span>\r\n                  <span class=\"corner-suit\" :class=\"getSuitClass(c.suit)\">{{ c.suit }}</span>\r\n                </span>\r\n              </span>\r\n            </span>\r\n            <span v-else class=\"history-pass\">不要</span>\r\n          </div>\r\n        </div>\r\n        <div v-else>无</div>\r\n      </div>\r\n    </div>\r\n    <!-- 当前出牌 + 当前轮到 -->\r\n    <div class=\"fixed-play-info\">\r\n      <div class=\"current-play-area\">\r\n        <div class=\"play-area-label\">当前出牌：</div>\r\n        <div class=\"play-area-cards\">\r\n          <template v-if=\"currentPlay && currentPlay.length\">\r\n            <span v-for=\"(c, idx) in currentPlay\" :key=\"idx\" :class=\"['card-item', getSuitClass(c.suit)]\">\r\n              <span class=\"card-corner top-left\">\r\n                <span class=\"corner-value\" :class=\"getSuitClass(c.suit)\">{{ c.value }}</span>\r\n                <span class=\"corner-suit\" :class=\"getSuitClass(c.suit)\">{{ c.suit }}</span>\r\n              </span>\r\n              <span class=\"card-corner bottom-right\">\r\n                <span class=\"corner-value\" :class=\"getSuitClass(c.suit)\">{{ c.value }}</span>\r\n                <span class=\"corner-suit\" :class=\"getSuitClass(c.suit)\">{{ c.suit }}</span>\r\n              </span>\r\n            </span>\r\n          </template>\r\n          <span v-else class=\"play-pass\">不要</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- 底部手牌与操作区 -->\r\n    <div class=\"bottom-bar\">\r\n      <div class=\"actions\">\r\n        <button @click=\"playCards\" :disabled=\"canPlay\">出牌</button>\r\n        <button @click=\"pass\" :disabled=\"canPass\">不要</button>\r\n      </div>\r\n      <CardHand\r\n        :hand=\"players[0].hand\"\r\n        :selectedIndexes=\"selectedIndexes\"\r\n        :getSuitClass=\"getSuitClass\"\r\n        @toggleSelect=\"toggleSelect\"\r\n      />\r\n    </div>\r\n    <div v-if=\"winner !== null\" class=\"winner-modal\">\r\n      <div class=\"winner-content\">\r\n        <div>胜者：{{ players[winner].name }}</div>\r\n        <button @click=\"startGame\">再来一局</button>\r\n      </div>\r\n    </div>\r\n    <!-- 悬浮手牌浮层 -->\r\n    <div v-if=\"hoverHandIdx !== null\" :style=\"hoverHandStyle\" class=\"hand-tooltip-debug\">\r\n      <CardHand :hand=\"players[hoverHandIdx].hand\" :selectedIndexes=\"[]\" :getSuitClass=\"getSuitClass\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport { createDeck, shuffle, deal } from '../game/card';\r\nimport { aiPlay } from '../game/ai';\r\nimport { isValidPlay } from '../game/rules';\r\nimport CardHand from './CardHand.vue';\r\nimport Recorder from './Recorder.vue';\r\n\r\nexport default {\r\n  name: 'GameTable',\r\n  components: { CardHand, Recorder },\r\n  created() {\r\n    this.players = [\r\n      { name: '自己', isAI: false, isBanker: true, team: 0, hand: [] },\r\n      { name: 'AI1', isAI: true, isBanker: false, team: 1, hand: [] },\r\n      { name: 'AI2', isAI: true, isBanker: false, team: 1, hand: [] },\r\n      { name: 'AI3', isAI: true, isBanker: false, team: 1, hand: [] },\r\n    ];\r\n  },\r\n  data() {\r\n    return {\r\n      // 四个玩家，0为自己，1-3为AI\r\n      players: [],\r\n      // 记牌器用的牌面顺序\r\n      cardOrder: ['4', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A', '2', '3', '5'],\r\n      currentTurn: 0, // 当前轮到的玩家索引\r\n      playNumber: 0, // 游戏出牌次数\r\n      currentPlay: [], // 当前桌面上的出牌\r\n      winner: null, // 胜者索引\r\n      selectedIndexes: [], // 选中的手牌索引\r\n      historyPlays: [], // 出牌历史，{name, cards:[]}对象数组\r\n      hoverHandIdx: null,\r\n      hoverHandStyle: {},\r\n    };\r\n  },\r\n  watch: {\r\n    historyPlays: {\r\n      handler() {\r\n        this.$nextTick(() => {\r\n          const list = this.$refs.historyList;\r\n          if (list) {\r\n            requestAnimationFrame(() => {\r\n              list.scrollTop = list.scrollHeight;\r\n              // 双重保险确保滚动到底部\r\n              requestAnimationFrame(() => {\r\n                list.scrollTop = list.scrollHeight;\r\n              });\r\n            });\r\n          }\r\n        });\r\n      },\r\n      deep: true\r\n    }\r\n  },\r\n  computed: {\r\n    // 是否可以出牌（仅自己且未结束）\r\n    canPlay() {\r\n      return this.players[this.currentTurn].isAI || this.winner !== null || this.selectedIndexes.length === 0;\r\n    },\r\n    // 是否可以不要（仅自己且未结束）\r\n    canPass() {\r\n      const lastValid = this.getLastValidPlay();\r\n      return this.players[this.currentTurn].isAI || this.winner !== null || this.historyPlays.length === 0 || lastValid.name === this.players[this.currentTurn].name;\r\n    },\r\n  },\r\n  methods: {\r\n    // 初始化并开始新一局游戏\r\n    startGame() {\r\n      const deck = shuffle(createDeck()); // 洗牌\r\n      const hands = deal(deck); // 发牌\r\n      for (let i = 0; i < 4; i++) {\r\n        this.players[i].hand = hands[i]; // 分配手牌\r\n        this.hasBlackFive(this.players[i]); // 分配队伍\r\n      }\r\n      this.currentTurn = 0; // 从自己开始\r\n      this.currentPlay = []; // 清空当前出牌\r\n      this.historyPlays = []; // 清空出牌历史\r\n      this.winner = null; // 清空胜者索引\r\n      this.selectedIndexes = []; // 清空选中的手牌索引\r\n    },\r\n    // 获取上一个有效出牌（非不要），返回 {name, cards} 或 null\r\n    getLastValidPlay() {\r\n      for (let i = this.historyPlays.length - 1; i >= 0; i--) {\r\n        if (this.historyPlays[i].cards && this.historyPlays[i].cards.length > 0) {\r\n          return this.historyPlays[i];\r\n        }\r\n      }\r\n      return null;\r\n    },\r\n    // 判断手里是否有黑桃五\r\n    hasBlackFive(player) {\r\n      for (let i = 0; i < player.hand.length; i++) {\r\n        if (player.hand[i].suit === '♥' && player.hand[i].value === '5') {\r\n          player.team = 0;\r\n          return;\r\n        }\r\n      }\r\n    },\r\n    // 玩家出牌（根据选择的牌）\r\n    playCards() {\r\n      const player = this.players[this.currentTurn];\r\n      if (this.selectedIndexes.length === 0) return;\r\n      const sorted = this.selectedIndexes.slice().sort((a, b) => a - b); // (a, b) => a - b是排序函数\r\n      const outCards = sorted.map(i => player.hand[i]);\r\n      // 获取上家有效出牌\r\n      const lastValid = this.getLastValidPlay();\r\n      // 如果上家有效出牌是自己，则lastCards为空，允许任意出牌\r\n      let lastCards = [];\r\n      if (lastValid && lastValid.name !== player.name) {\r\n        lastCards = lastValid.cards;\r\n      }\r\n      // 出牌合法性校验\r\n      if (!isValidPlay(outCards, lastCards)) {\r\n        alert('手牌小');\r\n        return;\r\n      }\r\n      // 赋值本轮出牌\r\n      this.currentPlay = outCards;\r\n      // 记录本轮出牌\r\n      this.historyPlays.push({ playerIndex: this.currentTurn, name: player.name, cards: outCards.map(c => ({...c})) });\r\n      // 从手牌中移除出牌\r\n      for (let i = sorted.length - 1; i >= 0; i--) {\r\n        player.hand.splice(sorted[i], 1);\r\n      }\r\n      this.selectedIndexes = [];\r\n      // 检查胜者\r\n      this.checkWinner();\r\n      // 切换到下一个玩家\r\n      this.nextTurn();\r\n    },\r\n    // 根据花色返回对应class\r\n    getSuitClass(suit) {\r\n      if (suit === '♥' || suit === '♦') return 'red-suit';\r\n      if (suit === '♠' || suit === '♣') return 'black-suit';\r\n      return '';\r\n    },\r\n    // 切换选中/取消选中某张牌\r\n    toggleSelect(idx) {\r\n      if (this.currentTurn !== 0 || this.winner !== null) return;\r\n      const i = this.selectedIndexes.indexOf(idx);\r\n      if (i === -1) {\r\n        // 用新数组赋值，保证响应式\r\n        this.selectedIndexes = [...this.selectedIndexes, idx];\r\n      } else {\r\n        this.selectedIndexes = this.selectedIndexes.filter(j => j !== idx);\r\n      }\r\n    },\r\n    // 玩家选择不要\r\n    pass() {\r\n      if (this.historyPlays.length === 0) {\r\n        alert('第一次不允许不出');\r\n      }\r\n      const player = this.players[this.currentTurn];\r\n      // 记录本轮出牌\r\n      this.historyPlays.push({ playerIndex: this.currentTurn, name: player.name, cards: [] });\r\n      this.currentPlay = [];\r\n      this.nextTurn();\r\n    },\r\n    // 切换到下一个玩家\r\n    nextTurn() {\r\n      if (this.winner !== null) return; // 已有胜者则不再轮转\r\n      this.currentTurn = (this.currentTurn + 1) % 4;\r\n      this.playNumber++;\r\n      const player = this.players[this.currentTurn];\r\n      if (player.isAI) {\r\n        this.aiPlay();\r\n      }\r\n    },\r\n    // AI出牌逻辑，调用ai.js，带延时\r\n    aiPlay() {\r\n      const ai = this.players[this.currentTurn];\r\n      if (ai.hand.length > 0) {\r\n        setTimeout(() => {\r\n          // 获取上家有效出牌\r\n          const lastValid = this.getLastValidPlay();\r\n          // 如果上家有效出牌是当前AI，则lastCards为空\r\n          let lastCards = [];\r\n          if (lastValid && lastValid.name !== ai.name) {\r\n            lastCards = lastValid.cards;\r\n          }\r\n          const outCards = aiPlay(\r\n            ai.hand,\r\n            lastCards,\r\n            this.playNumber,\r\n            this.currentTurn,\r\n            this.historyPlays,\r\n            this.players.map(p => p.hand.length),\r\n            this.players.map(p => p.isBanker)\r\n          );\r\n          if (outCards && outCards.length > 0) {\r\n            this.currentPlay = outCards;\r\n            // 记录AI出牌\r\n            this.historyPlays.push({ playerIndex: this.currentTurn, name: ai.name, cards: outCards.map(c => ({...c})) });\r\n            ai.hand = ai.hand.filter(\r\n              c => !outCards.some(sel => sel.suit === c.suit && sel.value === c.value)\r\n            );\r\n          } else {\r\n            // AI选择不要\r\n            this.historyPlays.push({ playerIndex: this.currentTurn, name: ai.name, cards: [] });\r\n            this.currentPlay = [];\r\n          }\r\n          this.checkWinner();\r\n          this.nextTurn();\r\n        }, 700 + Math.random() * 800); // 700~1500ms\r\n      } else {\r\n        this.currentPlay = [];\r\n        this.checkWinner();\r\n        this.nextTurn();\r\n      }\r\n    },\r\n    // 检查是否有玩家出完牌，设置胜者\r\n    checkWinner() {\r\n      for (let i = 0; i < 4; i++) {\r\n        if (this.players[i].hand.length === 0) {\r\n          this.winner = i;\r\n        }\r\n      }\r\n    },\r\n    toggleHand(idx) {\r\n      if (this.hoverHandIdx === idx) {\r\n        this.hideHand();\r\n      } else {\r\n        this.showHand(idx);\r\n      }\r\n    },\r\n    showHand(idx) {\r\n      this.hoverHandIdx = idx;\r\n      this.hoverHandStyle = {\r\n        position: 'fixed',\r\n        left: '50%',\r\n        top: '21%',\r\n        transform: 'translate(-50%, -50%)',\r\n        zIndex: 1000,\r\n        background: '#fff',\r\n        border: '1px solid #ccc',\r\n        padding: '8px',\r\n        boxShadow: '0 2px 8px rgba(0,0,0,0.15)',\r\n        borderRadius: '4px',\r\n        minWidth: '180px',\r\n        minHeight: '100px',\r\n      };\r\n    },\r\n    hideHand() {\r\n      this.hoverHandIdx = null;\r\n    },\r\n    handleBodyClick(evt) {\r\n      if (this.hoverHandIdx !== null) {\r\n        const tooltip = this.$el.querySelector('.hand-tooltip-debug');\r\n        const tabs = this.$el.querySelectorAll('.player-tab');\r\n        if (\r\n          (tooltip && tooltip.contains(evt.target)) ||\r\n          Array.from(tabs).some(tab => tab.contains(evt.target))\r\n        ) {\r\n          return;\r\n        }\r\n        this.hideHand();\r\n      }\r\n    },\r\n  },\r\n  // 组件挂载后自动开始游戏\r\n  mounted() {\r\n    this.startGame();\r\n    document.body.addEventListener('click', this.handleBodyClick, true);\r\n  },\r\n  beforeUnmount() {\r\n    document.body.removeEventListener('click', this.handleBodyClick, true);\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* 新增顶部容器样式 */\r\n.top-container {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100vw;\r\n  z-index: 30;\r\n}\r\n/**** 桌面端基础样式 ****/\r\n\r\n\r\n.top-container {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100vw;\r\n  z-index: 30;\r\n}\r\n/**** 桌面端基础样式 ****/\r\n.game-table {\r\n  display: flex;\r\n  flex-direction: column;\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  background: #f8fafc;\r\n  overflow: hidden;\r\n  z-index: 9;\r\n}\r\n.players { display: flex; justify-content: space-around; margin-bottom: 20px; flex-wrap: wrap; }\r\n.ai-row-on-top {\r\n  width: 100vw;\r\n  display: flex;\r\n  justify-content: center;\r\n  padding-top: 0;\r\n  padding-bottom: 4px;\r\n  background: #f8fafc;\r\n}\r\n.ai-block-wrap {\r\n  display: flex;\r\n  flex-direction: row;\r\n  gap: 16px;\r\n  justify-content: center;\r\n  width: auto;\r\n  background: transparent;\r\n  pointer-events: auto;\r\n}\r\n.ai-block-wrap {\r\n  display: flex;\r\n  flex-direction: row;\r\n  gap: 8px;\r\n  justify-content: center;\r\n  width: 100%;\r\n}\r\n.player-tab {\r\n  min-width: 68px;\r\n  max-width: 90px;\r\n  background: #f8fafc; /* 与记牌器背景一致 */\r\n  border-radius: 6px;\r\n  padding: 4px 4px 2px 4px;\r\n  box-shadow: 0 1px 2px #eee;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  border: 2px solid #d0d0d0;\r\n  transition: border 0.2s, background 0.2s, box-shadow 0.2s;\r\n  font-size: 13px;\r\n  line-height: 1.1;\r\n}\r\n.player-tab.me {\r\n  font-weight: bold;\r\n}\r\n.player-tab.active {\r\n  border: 2px solid #42b983;\r\n  background: #e3f9f1;\r\n  box-shadow: 0 2px 8px #b2f2e5;\r\n}\r\n.player-label {\r\n  font-size: 14px;\r\n  margin-bottom: 1px;\r\n}\r\n.player-hand-count {\r\n  color: #888;\r\n  font-size: 12px;\r\n  margin-top: 1px;\r\n}\r\n.player.me { border: 2px solid #42b983; padding: 10px; border-radius: 8px; background: #e3f9f1; }\r\n.hand { margin: 8px 0; min-height: 38px; }\r\n.hand .selected {\r\n  background: #ffe082;\r\n  border-radius: 4px;\r\n  padding: 2px 4px;\r\n  box-shadow: 0 2px 8px #ffd54f;\r\n  border: 1.5px solid #ffb300;\r\n}\r\n.red-suit { color: #e53935; }\r\n.black-suit { color: #222; }\r\n.club-suit { color: #388e3c; }\r\n.suit-symbol { font-size: 18px; font-weight: bold; margin-right: 1px; }\r\n.ai-block { background: #f3f3f3; border-radius: 8px; padding: 8px 12px; margin: 0 4px; min-width: 90px; box-shadow: 0 1px 4px #eee; }\r\n.ai-title { font-weight: bold; color: #888; margin-bottom: 4px; }\r\n.ai-hand { color: #666; }\r\n.current-play { font-size: 14px; margin-bottom: 4px; }\r\n.current-turn { font-size: 13px; }\r\n.current-turn .me { color: #42b983; font-weight: bold; }\r\n.winner-modal { position: fixed; left: 0; top: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.18); display: flex; align-items: center; justify-content: center; z-index: 100; }\r\n.winner-content { background: #fff; border-radius: 12px; padding: 32px 40px; box-shadow: 0 4px 24px #bbb; text-align: center; font-size: 22px; }\r\n.winner-content button { margin-top: 18px; font-size: 18px; background: #42b983; color: #fff; border: none; border-radius: 6px; padding: 8px 24px; cursor: pointer; }\r\n/* 底部手牌与操作区固定样式 */\r\n.bottom-bar {\r\n  position: fixed;\r\n  left: 0;\r\n  bottom: 0;\r\n  width: 100vw;\r\n  background: #f8fafc;\r\n  box-shadow: 0 -2px 12px #e0e0e0;\r\n  z-index: 10;\r\n  padding: 2px 0 2px 0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n.bottom-bar .actions {\r\n  margin-top: 2px;\r\n}\r\n\r\n\r\n/* 统一卡片样式，完全同步 CardHand.vue 的 .card-item 及相关样式 */\r\n.card-item {\r\n  user-select: none;\r\n  position: relative;\r\n  width: 44px;\r\n  height: 70px;\r\n  text-align: left;\r\n  box-shadow: 0 2px 8px #bbb;\r\n  transition: all .2s;\r\n  border-radius: 7px;\r\n  background: #fff;\r\n  border: 1.5px solid #cccccc;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n  padding: 0;\r\n}\r\n.card-corner {\r\n  position: absolute;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  font-size: 15px;\r\n  line-height: 1;\r\n  font-family: 'Arial', sans-serif;\r\n}\r\n.top-left {\r\n  top: 4px;\r\n  left: 5px;\r\n  text-align: left;\r\n}\r\n.bottom-right {\r\n  bottom: 4px;\r\n  right: 5px;\r\n  text-align: right;\r\n  align-items: flex-end;\r\n}\r\n.corner-value {\r\n  font-weight: bold;\r\n  font-size: 15px;\r\n  line-height: 1;\r\n}\r\n.corner-suit {\r\n  font-size: 13px;\r\n  margin-top: 1px;\r\n}\r\n.red-suit { color: #e53935; }\r\n.black-suit { color: #222; }\r\n.club-suit { color: #388e3c; }\r\n\r\n/* 出牌记录滚动区域 */\r\n.table-center {\r\n  flex-grow: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n  padding: 10px;\r\n  margin-top: 80px;\r\n  height: 100%;\r\n  margin-bottom: 336px; /* 增加下边距 */\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.current-play.history-scroll {\r\n  flex-grow: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  border-radius: 8px;\r\n  padding: 10px 0;\r\n  height: 100%;\r\n  /* 添加滚动行为平滑过渡 */\r\n  scroll-behavior: smooth;\r\n}\r\n\r\n.history-list {\r\n  flex-grow: 1;\r\n  overflow-y: auto;\r\n  min-height: 0;\r\n}\r\n.history-item {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 2px;\r\n  font-size: 13px;\r\n}\r\n.history-name {\r\n  font-weight: bold;\r\n  margin-right: 4px;\r\n}\r\n.history-cards {\r\n  display: flex;\r\n  flex-direction: row;\r\n  gap: 4px;\r\n  align-items: center;\r\n}\r\n.history-pass {\r\n  color: #aaa;\r\n  margin-left: 2px;\r\n}\r\n\r\n@media (max-width: 600px) {\r\n  .game-table {\r\n    padding: 2px;\r\n    border-radius: 0;\r\n    box-shadow: none;\r\n    max-width: 100vw;\r\n    min-height: 100vh;\r\n    padding-top: 60px; /* 顶部记牌器高度适配，略大 */\r\n  }\r\n  .recorder-top-bar {\r\n    align-items: flex-start;\r\n    margin-bottom: 0;\r\n    padding: 0;\r\n    justify-content: center;\r\n    min-height: unset;\r\n    height: auto;\r\n    background: #f8fafc;\r\n    box-shadow: 0 1px 4px #e0e0e0;\r\n    overflow: visible;\r\n  }\r\n  .recorder-top-inner {\r\n    transform: scale(0.7);\r\n    transform-origin: top center;\r\n    margin-top: 0;\r\n    padding: 0;\r\n    height: auto;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    overflow: visible;\r\n    min-width: max-content;\r\n  }\r\n  .players {\r\n    flex-direction: column;\r\n    align-items: stretch;\r\n    margin-bottom: 6px;\r\n    gap: 4px;\r\n  }\r\n  .ai-block {\r\n    min-width: 0;\r\n    font-size: 13px;\r\n    padding: 4px 2px;\r\n    margin: 1px 0;\r\n  }\r\n  .hand {\r\n    min-height: 22px;\r\n    font-size: 13px;\r\n  }\r\n  .hand .selected {\r\n    background: #ffe082;\r\n    border-radius: 4px;\r\n    padding: 2px 4px;\r\n    box-shadow: 0 2px 8px #ffd54f;\r\n    border: 1.5px solid #ffb300; /* 保持选中状态的边框样式不变 */\r\n  }\r\n  .suit-symbol {\r\n    font-size: 13px;\r\n  }\r\n  .current-play, .current-turn {\r\n    font-size: 13px;\r\n  }\r\n  .winner-content {\r\n    padding: 10px 4px;\r\n    font-size: 15px;\r\n  }\r\n  .winner-content button {\r\n    font-size: 13px;\r\n    padding: 4px 8px;\r\n  }\r\n  .bottom-bar {\r\n    padding: 2px 0 2px 0;\r\n    bottom: 0;\r\n    min-height: 54px;\r\n  }\r\n  .bottom-bar .actions {\r\n    margin-top: 2px;\r\n  }\r\n  .bottom-bar button {\r\n    font-size: 14px;\r\n    padding: 4px 10px;\r\n  }\r\n  .history-scroll {\r\n    max-height: 460px;\r\n    padding: 2px 2px;\r\n    font-size: 12px;\r\n    touch-action: none;\r\n  }\r\n  .fixed-play-info {\r\n    height: 60px; /* 移动端高度从90px减小到60px */\r\n    bottom: 145px;\r\n    padding: 5px 0;\r\n  }\r\n}\r\n/* 让顶部记牌器样式居中 */\r\n.recorder-top-bar {\r\n  width: 100vw;\r\n  height: 80px;\r\n  display: flex;\r\n  justify-content: center;\r\n  background: #f8fafc;\r\n  box-shadow: 0 2px 8px #e0e0e0;\r\n  overflow: visible;\r\n}\r\n.recorder-top-inner {\r\n  margin: 0 auto;\r\n  padding: 8px 0 0 0;\r\n  overflow: visible;\r\n}\r\n/* 出牌区样式 */\r\n.current-play-area {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  margin-bottom: 6px;\r\n}\r\n.play-area-label {\r\n  font-size: 13px;\r\n  color: #888;\r\n  margin-bottom: 2px;\r\n}\r\n.play-area-cards {\r\n  display: flex;\r\n  flex-direction: row;\r\n  gap: 4px;\r\n  min-height: 32px;\r\n  align-items: center;\r\n}\r\n.play-pass {\r\n  color: #aaa;\r\n  font-size: 15px;\r\n  padding: 0 8px;\r\n}\r\n/* 禁止页面整体滚动，防止抖动和内容被遮挡 */\r\n:global(html), :global(body) {\r\n  height: 100vh;\r\n  overflow: hidden;\r\n}\r\n\r\n/* 固定区域样式 */\r\n.fixed-play-info {\r\n  position: fixed;\r\n  bottom: 120px; /* 位于手牌区域上方 */\r\n  left: 0;\r\n  width: 100vw;\r\n  height: 130px; /* 高度从100px减小到70px */\r\n  background: #f8fafc;\r\n  padding: 8px 0;\r\n  box-shadow: 0 -2px 10px rgba(0,0,0,0.05);\r\n  z-index: 9; /* 确保在手牌区域上方但在顶部容器下方 */\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n.hand-tooltip-debug {\r\n  pointer-events: none;\r\n  min-width: 120px;\r\n  min-height: 80px;\r\n  position: fixed;\r\n}\r\n</style>\r\n","/**\r\n * 所有花色\r\n * @type {string[]}\r\n */\r\nexport const SUITS = ['♠','♥','♣','♦'];\r\n\r\n/**\r\n * 牌面点数顺序（特殊顺序，5最大）\r\n * @type {string[]}\r\n */\r\nexport const CARD_ORDER = ['4', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A', '2', '3', '5'];\r\n\r\nexport const STRAIGHT_CARD_ORDER = ['4', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'];\r\n\r\n/**\r\n * 生成一副完整的牌（共13种点数*4花色=52张）\r\n * @returns {Array<{suit:string,value:string}>}\r\n */\r\nexport function createDeck() {\r\n  const deck = [];\r\n  for (const suit of SUITS) {\r\n    for (const value of CARD_ORDER) {\r\n      deck.push({ suit, value });\r\n    }\r\n  }\r\n  return deck;\r\n}\r\n\r\n/**\r\n * 洗牌（Fisher-Yates算法，原地打乱）\r\n * @param {Array} deck - 牌堆\r\n * @returns {Array} 洗好的牌堆\r\n */\r\nexport function shuffle(deck) {\r\n  for (let i = deck.length - 1; i > 0; i--) {\r\n    const j = Math.floor(Math.random() * (i + 1));\r\n    [deck[i], deck[j]] = [deck[j], deck[i]];\r\n  }\r\n  return deck;\r\n}\r\n\r\n/**\r\n * 发牌，将牌堆均分为4份，并按牌值从小到大排序\r\n * @param {Array} deck - 已洗好的牌堆\r\n * @returns {Array[]} hands - 4个玩家的手牌数组\r\n */\r\nexport function deal(deck) {\r\n  const hands = [[], [], [], []];\r\n  for (let i = 0; i < deck.length; i++) {\r\n    hands[i % 4].push(deck[i]);\r\n  }\r\n  // 按牌值顺序排序每个玩家手牌\r\n  for (let i = 0; i < 4; i++) {\r\n    hands[i].sort((a, b) => CARD_ORDER.indexOf(a.value) - CARD_ORDER.indexOf(b.value));\r\n  }\r\n  return hands;\r\n}\r\n","// rules.js：牌型判断、牌值比较\r\nimport { CARD_ORDER, STRAIGHT_CARD_ORDER } from './card';\r\n\r\n/**\r\n * 单张\r\n */\r\nconst SINGLE = 'single';\r\n/**\r\n * 对子\r\n */\r\nconst PAIR = 'pair';\r\n/**\r\n * 轰\r\n */\r\nconst TRIPLE = 'triple';\r\n/**\r\n * 炸\r\n */\r\nconst BOMB = 'bomb';\r\n/**\r\n * 顺子\r\n */\r\nconst STRAIGHT = 'straight';\r\n/**\r\n * 连对\r\n */\r\nconst DOUBLE_STRAIGHT = 'doubleStraight';\r\n/**\r\n * 无效牌型\r\n */\r\nconst INVALID = 'invalid';\r\n\r\n/** * 比较两张牌的大小\r\n * @param {Object} a - 第一张牌\r\n * @param {Object} b - 第二张牌\r\n * @returns {number} - 返回值大于0表示a大于b，小于0表示a小于b，等于0表示相等\r\n */\r\nexport function compareCard(a, b) {\r\n  return CARD_ORDER.indexOf(a.value) - CARD_ORDER.indexOf(b.value);\r\n}\r\n\r\n/**\r\n * 判断当前出牌是否可以压过上家\r\n * @param {Array} selectedCards - 当前要出的牌\r\n * @param {Array} lastCards - 上家出的牌（桌面牌）\r\n * @returns {boolean}\r\n */\r\nexport function isValidPlay(selectedCards, lastCards) {\r\n  // 不能出空牌\r\n  if (!selectedCards || selectedCards.length === 0) return false;\r\n  const type = getCardType(selectedCards);\r\n  if (type === INVALID) return false;\r\n  // 桌面无牌，任意合法牌型可出\r\n  if (!lastCards || lastCards.length === 0) return true;\r\n  const lastType = getCardType(lastCards);\r\n  // 牌型不同，炸弹能压一切，轰能压除炸弹外的所有\r\n  if (type === BOMB && lastType !== BOMB) return true;\r\n  if (type === TRIPLE && lastType !== BOMB && lastType !== TRIPLE) return true;\r\n  if (type !== lastType) return false;\r\n  // 牌型相同，数量必须相同\r\n  if (selectedCards.length !== lastCards.length) return false;\r\n  // 比较牌值为5的\r\n\r\n  // 比较大小\r\n  const sortedSel = sortCards(selectedCards);\r\n  const sortedLast = sortCards(lastCards);\r\n  // 只比较最后一张即可\r\n  return compareCard(sortedSel[selectedCards.length - 1], sortedLast[lastCards.length - 1]) > 0;\r\n}\r\n\r\n/**\r\n * 排序手牌\r\n * @param {*} cards 乱序手牌\r\n * @returns 排序后的手牌\r\n */\r\nexport function sortCards(cards) {\r\n  return cards.slice().sort(compareCard);\r\n}\r\n\r\n/**\r\n * 判断牌型\r\n * @param {*} cards 手牌\r\n * @returns 类型\r\n */\r\nexport function getCardType(cards) {\r\n  if (cards.length === 1) return SINGLE; // 单\r\n  if (cards.length === 2 && cards[0].value === cards[1].value) return PAIR; //对子\r\n  if (cards.length === 3 && cards[0].value === cards[1].value && cards[1].value === cards[2].value) return TRIPLE; // 轰\r\n  if (cards.length === 4 && cards[0].value === cards[1].value && cards[1].value === cards[2].value && cards[2].value === cards[3].value) return BOMB; // 炸\r\n  if (isStraight(cards)) return STRAIGHT; // 顺子\r\n  if (isDoubleStraight(cards)) return DOUBLE_STRAIGHT; // 连对\r\n  return INVALID; // 无效牌型\r\n}\r\n\r\nexport function isSingle(cards) {\r\n  return cards.length === 1;\r\n}\r\n\r\nexport function isPair(cards) {\r\n  return cards.length === 2 && cards[0].value === cards[1].value;\r\n}\r\n\r\nexport function isTriple(cards) {\r\n  return cards.length === 3 && cards[0].value === cards[1].value && cards[1].value === cards[2].value;\r\n}\r\n\r\nexport function isBomb(cards) {\r\n  return cards.length === 4 && cards[0].value === cards[1].value && cards[1].value === cards[2].value && cards[2].value === cards[3].value;\r\n}\r\n\r\n/**\r\n * 判断是否为顺子\r\n * 例如：4、6、7或6、7、8\r\n * @param {*} cards 手牌\r\n * @returns {boolean}\r\n */\r\nexport function isStraight(cards) {\r\n  if (cards.length < 3) return false;\r\n  const idxs = cards.map(c => STRAIGHT_CARD_ORDER.indexOf(c.value)).sort((a, b) => a - b);\r\n  if (idxs.includes(-1)) return false;\r\n  for (let i = 1; i < idxs.length; i++) {\r\n    // K后面只能接A\r\n    if (STRAIGHT_CARD_ORDER[idxs[i - 1]] === 'K' && STRAIGHT_CARD_ORDER[idxs[i]] !== 'A') return false;\r\n    // 允许K-A，但不允许A-2、A-3、A-5\r\n    if (\r\n      !(STRAIGHT_CARD_ORDER[idxs[i - 1]] === 'K' && STRAIGHT_CARD_ORDER[idxs[i]] === 'A') &&\r\n      (idxs[i] - idxs[i - 1] !== 1)\r\n    ) {\r\n      return false;\r\n    }\r\n  }\r\n  return true;\r\n}\r\n\r\n/**\r\n * 判断是否为连对\r\n * 例如：44、66或66、77\r\n * @param {*} cards 手牌\r\n * @returns {boolean}\r\n */\r\nexport function isDoubleStraight(cards) {\r\n  if (cards.length < 4 || cards.length % 2 !== 0) return false;\r\n  const sorted = cards.slice().sort(compareCard);\r\n  for (let i = 0; i < sorted.length; i += 2) {\r\n    if (sorted[i].value !== sorted[i + 1].value) return false;\r\n    if (i > 0) {\r\n      const curr = STRAIGHT_CARD_ORDER.indexOf(sorted[i].value);\r\n      const prev = STRAIGHT_CARD_ORDER.indexOf(sorted[i - 2].value);\r\n      if (prev === -1 || curr === -1) return false;\r\n      // K后面只能接A\r\n      if (STRAIGHT_CARD_ORDER[prev] === 'K' && STRAIGHT_CARD_ORDER[curr] !== 'A') return false;\r\n      if (\r\n        !(STRAIGHT_CARD_ORDER[prev] === 'K' && STRAIGHT_CARD_ORDER[curr] === 'A') &&\r\n        (curr - prev !== 1)\r\n      ) {\r\n        return false;\r\n      }\r\n    }\r\n  }\r\n  return true;\r\n}\r\n","import { isValidPlay, sortCards, isStraight, isDoubleStraight, isBomb, isTriple, isPair } from './rules';\r\nimport { CARD_ORDER, SUITS } from './card';\r\n\r\n/**\r\n * 汇总“已知的已出现牌”：历史中所有非空出牌 + 自己当前手牌。\r\n * 作用：为推断剩余牌和记牌统计提供基础集合。\r\n * @param {Array<Object>} historyPlays 历史出牌记录（含每次 play 的 cards）\r\n * @param {Array<Object>} [myHand=[]] 我的手牌\r\n * @returns {Array<Object>} 已出现的牌列表\r\n */\r\nfunction getPlayedCards(historyPlays, myHand = []) {\r\n  const played = [];\r\n  for (const play of historyPlays) {\r\n    if (play.cards && play.cards.length) {\r\n      played.push(...play.cards);\r\n    }\r\n  }\r\n  if (myHand && myHand.length) played.push(...myHand);\r\n  return played;\r\n}\r\n\r\n/**\r\n * 推断场上尚未出现的牌（全牌库减已出牌和自己手牌）。\r\n */\r\nfunction getRemainingCards(myHand, historyPlays) {\r\n  const values = CARD_ORDER;\r\n  const allCards = [];\r\n  for (const suit of SUITS) for (const value of values) allCards.push({ suit, value });\r\n  const played = getPlayedCards(historyPlays, myHand);\r\n  const playedSet = new Set(played.map(c => `${c.suit}${c.value}`));\r\n  return allCards.filter(c => !playedSet.has(`${c.suit}${c.value}`));\r\n}\r\n\r\n/**\r\n * 选择最小的单张（按 CARD_ORDER 排序）\r\n * @param {Array<Array<Object>>} singles 单牌候选集合\r\n * @returns {Array<Object>|null} 最小单张或 null\r\n */\r\nfunction selectSmallestSingle(singles) {\r\n  if (!singles || singles.length === 0) return null;\r\n  return singles.slice().sort((a, b) => CARD_ORDER.indexOf(a[0].value) - CARD_ORDER.indexOf(b[0].value))[0];\r\n}\r\n\r\n/**\r\n * 选择最小的对子（按 CARD_ORDER 排序）\r\n * @param {Array<Array<Object>>} pairs 对子候选集合\r\n * @returns {Array<Object>|null} 最小对子或 null\r\n */\r\nfunction selectSmallestPair(pairs) {\r\n  if (!pairs || pairs.length === 0) return null;\r\n  return pairs.slice().sort((a, b) => CARD_ORDER.indexOf(a[0].value) - CARD_ORDER.indexOf(b[0].value))[0];\r\n}\r\n\r\n/**\r\n * 选择最小的顺子/连对（优先较短，再优先起始点较小）\r\n * @param {Array<Array<Object>>} list 顺子或连对候选集合\r\n * @returns {Array<Object>|null} 最小组合或 null\r\n */\r\nfunction selectSmallestStraight(list) {\r\n  if (!list || list.length === 0) return null;\r\n  return list.slice().sort((A, B) => (A.length - B.length) || (CARD_ORDER.indexOf(A[0].value) - CARD_ORDER.indexOf(B[0].value)))[0];\r\n}\r\n\r\n/**\r\n * 依据当前轮次与玩家手牌/上下家情况，确定AI出牌风格\r\n * @param {Array} hand 当前手牌\r\n * @param {Array} players 所有玩家信息\r\n * @param {number} playerIndex 当前玩家索引\r\n * @param {number} playNumber 出牌序号\r\n * @param {Array} historyPlays 历史出牌记录\r\n * @returns {{style:string, round:number, teammateIndexes:number[], nextPlayerIdx:number}}\r\n */\r\nfunction determineStyle(hand, handCounts, playerIndex, playNumber, historyPlays, isBankerList) {\r\n  const round = playNumber % 4 + 1;\r\n  const teammateIndexes = getTeammateIndexesWithSpade5(playerIndex, isBankerList, historyPlays);\r\n  const nextPlayerIdx = getNextPlayerIndex(playerIndex, handCounts.length || 4);\r\n  const nextPlayerHandCount = handCounts[nextPlayerIdx] ?? 99;\r\n  let style = 'normal';\r\n  if (teammateIndexes.some(idx => (handCounts[idx] ?? 99) <= 2)) style = 'team';\r\n  else if (hand.length <= 5 || nextPlayerHandCount <= 2) style = 'aggressive';\r\n  else if (round <= 3) style = 'conservative';\r\n  return { style, round, teammateIndexes, nextPlayerIdx };\r\n}\r\n\r\n/**\r\n * 统计关键牌与潜在炸/轰数量\r\n * @param {Array} remainingCards 尚未出现的牌\r\n * @returns {{'2':number,'A':number,'5':number,'3':number,bomb:number,triple:number}}\r\n */\r\nfunction computeKeyCount(remainingCards) {\r\n  const keyValues = ['2', 'A', '5', '3'];\r\n  const keyCount = { '2': 0, 'A': 0, '5': 0, '3': 0, bomb: 0, triple: 0 };\r\n  for (const c of remainingCards) if (keyValues.includes(c.value)) keyCount[c.value]++;\r\n  const valueMap = {};\r\n  for (const c of remainingCards) valueMap[c.value] = (valueMap[c.value] || 0) + 1;\r\n  for (const v in valueMap) {\r\n    if (valueMap[v] >= 4) keyCount.bomb++;\r\n    else if (valueMap[v] >= 3) keyCount.triple++;\r\n  }\r\n  return keyCount;\r\n}\r\n\r\n/**\r\n * 将候选组合拆分为不同类型的集合\r\n * @param {Array} sorted 排序后的手牌\r\n * @param {number} round 当前轮次\r\n * @param {number} handSize 手牌规模\r\n * @returns {{combos:Array,triples:Array,bombs:Array,straights:Array,doubleStraights:Array,pairs:Array,singles:Array}}\r\n */\r\nfunction splitCombos(sorted, round, handSize) {\r\n  const combos = getOptimalCombos(sorted, round, handSize);\r\n  return {\r\n    combos,\r\n    triples: combos.filter(c => c.length === 3 && isTriple(c)),\r\n    bombs: combos.filter(c => c.length === 4 && isBomb(c)),\r\n    straights: combos.filter(c => c.length >= 3 && isStraightFast(c)),\r\n    doubleStraights: combos.filter(c => c.length >= 4 && isDoubleStraightFast(c)),\r\n    pairs: combos.filter(c => c.length === 2 && isPair(c)),\r\n    singles: combos.filter(c => c.length === 1)\r\n  };\r\n}\r\n\r\n/**\r\n * 获取上一轮是否由我赢下及最近一次非空出牌\r\n * @param {Array} historyPlays 历史出牌\r\n * @param {Array} players 玩家列表\r\n * @param {number} playerIndex 当前玩家索引\r\n * @returns {{wonLastTurn:boolean,lastNonEmptyPlay:Object|null}}\r\n */\r\nfunction getLastTurnInfo(historyPlays, playerIndex) {\r\n  let wonLastTurn = false;\r\n  let lastNonEmptyPlay = null;\r\n  if (historyPlays && historyPlays.length) {\r\n    for (let i = historyPlays.length - 1; i >= 0; i--) {\r\n      const p = historyPlays[i];\r\n      if (p && p.cards && p.cards.length) { lastNonEmptyPlay = p; break; }\r\n    }\r\n    if (lastNonEmptyPlay) {\r\n      if (typeof lastNonEmptyPlay.playerIndex === 'number' && lastNonEmptyPlay.playerIndex === playerIndex) {\r\n        let foundLaterNonEmpty = false;\r\n        for (let j = historyPlays.indexOf(lastNonEmptyPlay) + 1; j < historyPlays.length; j++) {\r\n          const p2 = historyPlays[j];\r\n          if (p2 && p2.cards && p2.cards.length) { foundLaterNonEmpty = true; break; }\r\n        }\r\n        if (!foundLaterNonEmpty) wonLastTurn = true;\r\n      }\r\n    }\r\n  }\r\n  return { wonLastTurn, lastNonEmptyPlay };\r\n}\r\n\r\n/**\r\n * 在赢下上一轮时，基于最近出牌计算“安全集合”\r\n * @param {boolean} wonLastTurn 是否赢下上一轮\r\n * @param {Object|null} lastNonEmptyPlay 最近一次非空出牌\r\n * @param {{straights:Array,doubleStraights:Array,pairs:Array,singles:Array,triples:Array}} sets 原集合\r\n * @returns 同结构的安全集合\r\n */\r\nfunction safeSets(wonLastTurn, lastNonEmptyPlay, sets) {\r\n  let { straights, doubleStraights, pairs, singles, triples } = sets;\r\n  if (wonLastTurn && lastNonEmptyPlay && lastNonEmptyPlay.cards) {\r\n    const avoidPlay = lastNonEmptyPlay.cards;\r\n    const avoidIfBeats = (arr) => arr.filter(a => !isValidPlay(a, avoidPlay));\r\n    straights = avoidIfBeats(straights);\r\n    doubleStraights = avoidIfBeats(doubleStraights);\r\n    pairs = avoidIfBeats(pairs);\r\n    singles = avoidIfBeats(singles);\r\n    triples = avoidIfBeats(triples);\r\n  }\r\n  return { straights, doubleStraights, pairs, singles, triples };\r\n}\r\n\r\n/**\r\n * 判定下家是否构成“威胁”，用于 team 风格的保护性接力决策。\r\n * 规则：\r\n * - 若下家是队友：不构成威胁；\r\n * - 若下家手牌≤2：直接视为威胁；\r\n * - 若桌面顶牌对应点数在其他玩家处仍有剩余：存在被轻易压制的风险。\r\n * @param {Array<Object>} players 所有玩家\r\n * @param {number} nextPlayerIdx 下家索引\r\n * @param {Array<Object>} lastCards 桌面最近一次非空出牌\r\n * @param {Array<number>} teammateIndexes 队友索引列表\r\n * @returns {boolean} 是否存在威胁\r\n */\r\nfunction isOpponentThreat(handCounts, nextPlayerIdx, lastCards, teammateIndexes, remainingCards) {\r\n  const nextIsTeammate = teammateIndexes && teammateIndexes.includes(nextPlayerIdx);\r\n  if (nextIsTeammate) return false;\r\n  const nextCount = handCounts[nextPlayerIdx] ?? 99;\r\n  if (typeof nextCount === 'number' && nextCount <= 2) return true;\r\n  if (!lastCards || lastCards.length === 0) return false;\r\n  const top = lastCards[lastCards.length - 1] || lastCards[0];\r\n  if (!top || !top.value) return false;\r\n  const leftCount = remainingCards.filter(c => c.value === top.value).length;\r\n  return leftCount > 0;\r\n}\r\n\r\n/**\r\n * team 风格的出牌选择\r\n * @returns {Array|null|[]} 返回要出的牌；null表示未选中\r\n */\r\nfunction pickTeamPlay(params) {\r\n  const { lastCards, lastOwnerIsTeammate, lastOwnerHandCount, wonLastTurn, singles, pairs, straights, doubleStraights, bombs, triples, safe, nextPlayerIdx, round, combos, sorted, teammateIndexes, handCounts, remainingCards } = params;\r\n  if (lastCards && lastCards.length > 0 && lastOwnerIsTeammate && lastOwnerHandCount <= 2) {\r\n    const threat = isOpponentThreat(handCounts, nextPlayerIdx, lastCards, teammateIndexes, remainingCards);\r\n    if (threat) {\r\n      const protect = respondWithLastCards({ lastCards, bombs, triples, straights, doubleStraights, combos, sorted, wonLastTurn, safe, round });\r\n      if (protect && protect.length) return protect;\r\n    }\r\n    return [];\r\n  }\r\n  if (wonLastTurn && (!lastCards || lastCards.length === 0)) {\r\n    const s = selectSmallestSingle(singles); if (s) return s;\r\n    const p = selectSmallestPair(pairs); if (p) return p;\r\n    const st = selectSmallestStraight(straights); if (st) return st;\r\n    const ds = selectSmallestStraight(doubleStraights); if (ds) return ds;\r\n  }\r\n  const teamSafeSingles = (wonLastTurn ? safe.singles : singles).filter(s => !['2', 'A'].includes(s[0].value));\r\n  if (teamSafeSingles.length > 0) return teamSafeSingles[0];\r\n  const teamSafePairs = (wonLastTurn ? safe.pairs : pairs).filter(p => !['2', 'A'].includes(p[0].value));\r\n  if (teamSafePairs.length > 0) return teamSafePairs[0];\r\n  const teamSafeStraights = (wonLastTurn ? safe.straights : straights).filter(arr => arr.every(c => !['2', 'A'].includes(c.value)));\r\n  if (teamSafeStraights.length > 0) return teamSafeStraights[0];\r\n  const teamSafeDoubleStraights = (wonLastTurn ? safe.doubleStraights : doubleStraights).filter(arr => arr.every(c => !['2', 'A'].includes(c.value)));\r\n  if (teamSafeDoubleStraights.length > 0) return teamSafeDoubleStraights[0];\r\n  const teamSafeTriples = (wonLastTurn ? safe.triples : triples).filter(arr => !['2', 'A'].includes(arr[0].value));\r\n  if (teamSafeTriples.length > 0) return teamSafeTriples[0];\r\n  if (bombs.length > 0) return bombs[0];\r\n  return null;\r\n}\r\n\r\n/**\r\n * aggressive 风格的出牌选择\r\n * @returns {Array|null|[]} 返回要出的牌；null表示未选中\r\n */\r\nfunction pickAggressivePlay(params) {\r\n  const { lastCards, combos, wonLastTurn, singles, pairs, straights, doubleStraights, bombs, triples, safe } = params;\r\n  if (lastCards && lastCards.length > 0) {\r\n    for (let i = combos.length - 1; i >= 0; i--) if (isValidPlay(combos[i], lastCards)) return combos[i];\r\n    return [];\r\n  }\r\n  if (wonLastTurn) {\r\n    const s = selectSmallestSingle(singles); if (s) return s;\r\n    const p = selectSmallestPair(pairs); if (p) return p;\r\n    const st = selectSmallestStraight(straights); if (st) return st;\r\n    const ds = selectSmallestStraight(doubleStraights); if (ds) return ds;\r\n  }\r\n  const aggrSafeStraights = (wonLastTurn ? safe.straights : straights).filter(arr => arr.every(c => !['2', 'A'].includes(c.value)));\r\n  if (aggrSafeStraights.length > 0) return aggrSafeStraights[0];\r\n  const aggrSafeDoubleStraights = (wonLastTurn ? safe.doubleStraights : doubleStraights).filter(arr => arr.every(c => !['2', 'A'].includes(c.value)));\r\n  if (aggrSafeDoubleStraights.length > 0) return aggrSafeDoubleStraights[0];\r\n  const aggrSafeTriples = (wonLastTurn ? safe.triples : triples).filter(arr => !['2', 'A'].includes(arr[0].value));\r\n  if (aggrSafeTriples.length > 0) return aggrSafeTriples[0];\r\n  const aggrSafePairs = (wonLastTurn ? safe.pairs : pairs).filter(p => !['2', 'A'].includes(p[0].value));\r\n  if (aggrSafePairs.length > 0) return aggrSafePairs[0];\r\n  const aggrSafeSingles = (wonLastTurn ? safe.singles : singles).filter(s => !['2', 'A'].includes(s[0].value));\r\n  if (aggrSafeSingles.length > 0) return aggrSafeSingles[0];\r\n  if (bombs.length > 0) return bombs[0];\r\n  return null;\r\n}\r\n\r\n/**\r\n * 有桌面牌时的统一响应策略\r\n * @returns {Array|[]} 返回要出的牌或空\r\n */\r\nfunction respondWithLastCards(params) {\r\n  const { lastCards, bombs, triples, straights, doubleStraights, combos, sorted, wonLastTurn, safe, round } = params;\r\n  for (const b of bombs) if (isValidPlay(b, lastCards)) return b;\r\n  if (isTriple(lastCards)) {\r\n    if (round <= 3) {\r\n      for (const b of bombs) if (isValidPlay(b, lastCards)) return b;\r\n      return [];\r\n    }\r\n    for (const t of triples) if (isValidPlay(t, lastCards)) return t;\r\n    for (const b of bombs) if (isValidPlay(b, lastCards)) return b;\r\n    return [];\r\n  }\r\n  if (isLongStraight(lastCards) || isLongDoubleStraight(lastCards)) {\r\n    if (round <= 3) {\r\n      for (const t of triples) if (isValidPlay(t, lastCards)) return t;\r\n      for (const b of bombs) if (isValidPlay(b, lastCards)) return b;\r\n    }\r\n  }\r\n  if (isStraightFast(lastCards)) {\r\n    for (const s of (wonLastTurn ? safe.straights : straights)) if (isValidPlay(s, lastCards)) return s;\r\n    for (const b of bombs) if (isValidPlay(b, lastCards)) return b;\r\n    return [];\r\n  }\r\n  if (isDoubleStraightFast(lastCards)) {\r\n    for (const ds of (wonLastTurn ? safe.doubleStraights : doubleStraights)) if (isValidPlay(ds, lastCards)) return ds;\r\n    for (const b of bombs) if (isValidPlay(b, lastCards)) return b;\r\n    return [];\r\n  }\r\n  for (const c of combos) {\r\n    if (!isBomb(c) && !isTriple(c) && isValidPlay(c, lastCards)) {\r\n      if (!wouldBreakOptimalCombo(c, sorted, combos)) {\r\n        if (c.length === 1 || c.length === 2) return c;\r\n      }\r\n    }\r\n  }\r\n  for (const c of combos) {\r\n    if (!isBomb(c) && isValidPlay(c, lastCards)) {\r\n      if (!wouldBreakOptimalCombo(c, sorted, combos)) return c;\r\n    }\r\n  }\r\n  for (const c of combos) if (isValidPlay(c, lastCards)) return c;\r\n  return [];\r\n}\r\n\r\n/**\r\n * 无桌面牌时（或保守/正常风格）优先级选择\r\n * @returns {Array} 返回要出的牌\r\n */\r\nfunction leadConservativeOrNormal(params) {\r\n  const { lastCards, combos, hand, wonLastTurn, singles, pairs, straights, doubleStraights, bombs, triples, keyCount, sorted } = params;\r\n  if (lastCards && lastCards.length > 0) {\r\n    for (const c of combos) if (isValidPlay(c, lastCards)) return c;\r\n    return [];\r\n  }\r\n  if (hand.length > 5) {\r\n    if (wonLastTurn) {\r\n      const s = selectSmallestSingle(singles); if (s) return s;\r\n      const p = selectSmallestPair(pairs); if (p) return p;\r\n      const st = selectSmallestStraight(straights); if (st) return st;\r\n      const ds = selectSmallestStraight(doubleStraights); if (ds) return ds;\r\n    }\r\n    if (keyCount['2'] > 0 && singles.length > 0) {\r\n      const non2 = singles.find(s => s[0].value !== '2'); if (non2) return non2;\r\n    }\r\n    if (keyCount['A'] > 0 && singles.length > 0) {\r\n      const nonA = singles.find(s => s[0].value !== 'A'); if (nonA) return nonA;\r\n    }\r\n    if (keyCount.bomb > 0 && bombs.length > 0) {\r\n      const nonBomb = singles.length > 0 ? singles[0] : null; if (nonBomb) return nonBomb;\r\n    }\r\n    if (pairs.length > 0) return pairs[0];\r\n    if (straights.length > 0) return straights[0];\r\n    if (doubleStraights.length > 0) return doubleStraights[0];\r\n    if (singles.length > 0) return singles[0];\r\n    if (triples.length > 0) return triples[0];\r\n    if (bombs.length > 0) return bombs[0];\r\n    return [sorted[0]];\r\n  } else {\r\n    if (singles.length > 0) return singles[0];\r\n    if (pairs.length > 0) return pairs[0];\r\n    if (triples.length > 0) return triples[0];\r\n    if (straights.length > 0) return straights[0];\r\n    if (doubleStraights.length > 0) return doubleStraights[0];\r\n    if (bombs.length > 0) return bombs[0];\r\n    return [sorted[0]];\r\n  }\r\n}\r\n\r\n/**\r\n * 智能的 AI 出牌策略\r\n * @param {Array} hand - 当前手牌\r\n * @param {Array} lastCards - 上一手牌\r\n * @param {number} playNumber - 当前出牌轮数\r\n * @param {Array} players - 所有玩家信息\r\n * @param {number} playerIndex - 当前玩家索引\r\n * @param {Array} historyPlays - 历史出牌记录\r\n * @returns {Array} 最佳出牌\r\n */\r\nexport function aiPlay(hand, lastCards = [], playNumber, playerIndex = 0, historyPlays = [], handCounts = [], isBankerList = []) {\r\n  const { style, round, teammateIndexes, nextPlayerIdx } = determineStyle(hand, handCounts, playerIndex, playNumber, historyPlays, isBankerList);\r\n  if (!hand || hand.length === 0) return [];\r\n  const sorted = sortCards(hand);\r\n  // 保留计算上一位玩家索引以便可能的扩展逻辑\r\n  \r\n  const remainingCards = getRemainingCards(hand, historyPlays);\r\n  const keyCount = computeKeyCount(remainingCards);\r\n  const { combos, triples, bombs, straights, doubleStraights, pairs, singles } = splitCombos(sorted, round, hand.length);\r\n  const { wonLastTurn, lastNonEmptyPlay } = getLastTurnInfo(historyPlays, playerIndex);\r\n  const safe = safeSets(wonLastTurn, lastNonEmptyPlay, { straights, doubleStraights, pairs, singles, triples });\r\n\r\n  let lastOwnerIdx = -1;\r\n  if (lastNonEmptyPlay) {\r\n    if (typeof lastNonEmptyPlay.playerIndex === 'number') lastOwnerIdx = lastNonEmptyPlay.playerIndex;\r\n  }\r\n  const lastOwnerIsTeammate = teammateIndexes.includes(lastOwnerIdx);\r\n  const lastOwnerHandCount = lastOwnerIdx >= 0 ? (handCounts[lastOwnerIdx] ?? 99) : 99;\r\n\r\n  if (style === 'team') {\r\n    const pick = pickTeamPlay({ lastCards, lastOwnerIsTeammate, lastOwnerHandCount, wonLastTurn, singles, pairs, straights, doubleStraights, bombs, triples, safe, nextPlayerIdx, round, combos, sorted, teammateIndexes, handCounts, remainingCards });\r\n    if (pick) return pick;\r\n    return [sorted[0]];\r\n  }\r\n\r\n  if (style === 'aggressive') {\r\n    const pick = pickAggressivePlay({ lastCards, combos, wonLastTurn, singles, pairs, straights, doubleStraights, bombs, triples, safe });\r\n    if (pick) return pick;\r\n    return [sorted[0]];\r\n  }\r\n\r\n  if (lastCards && lastCards.length > 0) {\r\n    return respondWithLastCards({ lastCards, bombs, triples, straights, doubleStraights, combos, sorted, wonLastTurn, safe, round });\r\n  }\r\n\r\n  return leadConservativeOrNormal({ lastCards, combos, hand, wonLastTurn, singles, pairs, straights, doubleStraights, bombs, triples, keyCount, sorted });\r\n}\r\n\r\n/**\r\n * 判断是否会拆分最优组合。\r\n * 若响应组合与某“最优组合”存在交集，且两者不完全一致，则视为拆分。\r\n * @param {Array<Object>} combo 响应或拟出的组合\r\n * @param {Array<Object>} hand 当前手牌（已排序）\r\n * @param {Array<Array<Object>>} optimalCombos 预先计算的最优组合集合\r\n * @returns {boolean} 是否会拆分\r\n */\r\nfunction wouldBreakOptimalCombo(combo, hand, optimalCombos) {\r\n  for (const optimal of optimalCombos) {\r\n    if (optimal.some(card => combo.includes(card)) && !arraysEqual(optimal, combo)) return true;\r\n  }\r\n  return false;\r\n}\r\n\r\n/**\r\n * 判断两个数组元素是否逐一相等（严格相等）。\r\n * @param {Array} a\r\n * @param {Array} b\r\n * @returns {boolean}\r\n */\r\nfunction arraysEqual(a, b) {\r\n  if (a.length !== b.length) return false;\r\n  for (let i = 0; i < a.length; i++) if (a[i] !== b[i]) return false;\r\n  return true;\r\n}\r\n\r\n/**\r\n * 生成最优的出牌组合列表。\r\n * 策略：优先抽取顺子/连对/对/单，必要时（后期或小牌阶段）再加入轰/炸。\r\n * @param {Array<Object>} hand 已排序的手牌\r\n * @param {number} round 当前回合数（1-4）\r\n * @param {number} handSize 手牌数量\r\n * @returns {Array<Array<Object>>} 候选组合列表\r\n */\r\nfunction getOptimalCombos(hand, round, handSize) {\r\n  const combos = [];\r\n  const usedCards = new Set();\r\n  const bombs = findBombs(hand, usedCards);\r\n  bombs.forEach(b => b.forEach(card => usedCards.add(`${card.suit}${card.value}`)));\r\n  const triples = findTriples(hand, usedCards);\r\n  triples.forEach(t => t.forEach(card => usedCards.add(`${card.suit}${card.value}`)));\r\n  const straights = findStraights(hand, usedCards);\r\n  straights.forEach(s => s.forEach(card => usedCards.add(`${card.suit}${card.value}`)));\r\n  const doubleStraights = findDoubleStraights(hand, usedCards);\r\n  doubleStraights.forEach(ds => ds.forEach(card => usedCards.add(`${card.suit}${card.value}`)));\r\n  const pairs = findPairs(hand, usedCards);\r\n  pairs.forEach(p => p.forEach(card => usedCards.add(`${card.suit}${card.value}`)));\r\n  const singles = findSingles(hand, usedCards);\r\n  singles.forEach(s => s.forEach(card => usedCards.add(`${card.suit}${card.value}`)));\r\n  combos.push(...straights, ...doubleStraights, ...pairs, ...singles);\r\n  if (round > 3 || handSize <= 5) combos.push(...triples, ...bombs);\r\n  return combos;\r\n}\r\n\r\n/**\r\n * 找顺子（避免重复花色与重复使用）。\r\n * @param {Array<Object>} hand 已排序的手牌\r\n * @param {Set<string>} usedCards 已占用牌集合（suit+value）\r\n * @returns {Array<Array<Object>>}\r\n */\r\nfunction findStraights(hand, usedCards) {\r\n  const straights = [];\r\n  for (let len = 3; len <= hand.length; len++) {\r\n    for (let i = 0; i <= hand.length - len; i++) {\r\n      const slice = hand.slice(i, i + len);\r\n      if (isStraightFast(slice) && !hasRepeatedSuit(slice) && !hasUsedCards(slice, usedCards)) {\r\n        straights.push(slice);\r\n        slice.forEach(card => usedCards.add(`${card.suit}${card.value}`));\r\n      }\r\n    }\r\n  }\r\n  return straights;\r\n}\r\n\r\n/**\r\n * 找连对（避免重复花色与重复使用）。\r\n * @param {Array<Object>} hand\r\n * @param {Set<string>} usedCards\r\n * @returns {Array<Array<Object>>}\r\n */\r\nfunction findDoubleStraights(hand, usedCards) {\r\n  const doubleStraights = [];\r\n  for (let len = 4; len <= hand.length; len += 2) {\r\n    for (let i = 0; i <= hand.length - len; i++) {\r\n      const slice = hand.slice(i, i + len);\r\n      if (isDoubleStraightFast(slice) && !hasRepeatedSuit(slice) && !hasUsedCards(slice, usedCards)) {\r\n        doubleStraights.push(slice);\r\n        slice.forEach(card => usedCards.add(`${card.suit}${card.value}`));\r\n      }\r\n    }\r\n  }\r\n  return doubleStraights;\r\n}\r\n\r\n/**\r\n * 找对子（避免重复使用）。\r\n * @param {Array<Object>} hand\r\n * @param {Set<string>} usedCards\r\n * @returns {Array<Array<Object>>}\r\n */\r\nfunction findPairs(hand, usedCards) {\r\n  const pairs = [];\r\n  for (let i = 0; i < hand.length - 1; i++) {\r\n    if (hand[i].value === hand[i + 1].value && !hasUsedCards([hand[i], hand[i + 1]], usedCards)) {\r\n      pairs.push([hand[i], hand[i + 1]]);\r\n      usedCards.add(`${hand[i].suit}${hand[i].value}`);\r\n      usedCards.add(`${hand[i + 1].suit}${hand[i + 1].value}`);\r\n    }\r\n  }\r\n  return pairs;\r\n}\r\n\r\n/**\r\n * 找单牌（避免重复使用）。\r\n * @param {Array<Object>} hand\r\n * @param {Set<string>} usedCards\r\n * @returns {Array<Array<Object>>}\r\n */\r\nfunction findSingles(hand, usedCards) {\r\n  const singles = [];\r\n  for (const card of hand) {\r\n    if (!hasUsedCards([card], usedCards)) {\r\n      singles.push([card]);\r\n      usedCards.add(`${card.suit}${card.value}`);\r\n    }\r\n  }\r\n  return singles;\r\n}\r\n\r\n/**\r\n * 找三张（轰，避免重复使用）。\r\n * @param {Array<Object>} hand\r\n * @param {Set<string>} usedCards\r\n * @returns {Array<Array<Object>>}\r\n */\r\nfunction findTriples(hand, usedCards) {\r\n  const triples = [];\r\n  for (let i = 0; i < hand.length - 2; i++) {\r\n    if (hand[i].value === hand[i + 1].value && hand[i].value === hand[i + 2].value && !hasUsedCards([hand[i], hand[i + 1], hand[i + 2]], usedCards)) {\r\n      triples.push([hand[i], hand[i + 1], hand[i + 2]]);\r\n      usedCards.add(`${hand[i].suit}${hand[i].value}`);\r\n      usedCards.add(`${hand[i + 1].suit}${hand[i + 1].value}`);\r\n      usedCards.add(`${hand[i + 2].suit}${hand[i + 2].value}`);\r\n    }\r\n  }\r\n  return triples;\r\n}\r\n\r\n/**\r\n * 找炸弹（避免重复使用）。\r\n * @param {Array<Object>} hand\r\n * @param {Set<string>} usedCards\r\n * @returns {Array<Array<Object>>}\r\n */\r\nfunction findBombs(hand, usedCards) {\r\n  const bombs = [];\r\n  for (let i = 0; i < hand.length - 3; i++) {\r\n    if (hand[i].value === hand[i + 1].value && hand[i].value === hand[i + 2].value && hand[i].value === hand[i + 3].value && !hasUsedCards([hand[i], hand[i + 1], hand[i + 2], hand[i + 3]], usedCards)) {\r\n      bombs.push([hand[i], hand[i + 1], hand[i + 2], hand[i + 3]]);\r\n      usedCards.add(`${hand[i].suit}${hand[i].value}`);\r\n      usedCards.add(`${hand[i + 1].suit}${hand[i + 1].value}`);\r\n      usedCards.add(`${hand[i + 2].suit}${hand[i + 2].value}`);\r\n      usedCards.add(`${hand[i + 3].suit}${hand[i + 3].value}`);\r\n    }\r\n  }\r\n  return bombs;\r\n}\r\n\r\n/**\r\n * 检查是否存在重复花色。\r\n * @param {Array<Object>} cards\r\n * @returns {boolean}\r\n */\r\nfunction hasRepeatedSuit(cards) {\r\n  const suits = new Set();\r\n  for (const card of cards) {\r\n    if (suits.has(card.suit)) return true;\r\n    suits.add(card.suit);\r\n  }\r\n  return false;\r\n}\r\n\r\n/**\r\n * 检查是否包含已使用的牌。\r\n * @param {Array<Object>} cards\r\n * @param {Set<string>} usedCards\r\n * @returns {boolean}\r\n */\r\nfunction hasUsedCards(cards, usedCards) {\r\n  for (const card of cards) {\r\n    if (usedCards.has(`${card.suit}${card.value}`)) return true;\r\n  }\r\n  return false;\r\n}\r\n\r\n/**\r\n * 快速顺子判断（假设已排序）。\r\n */\r\nfunction isStraightFast(cards) { return isStraight(cards); }\r\n\r\n/**\r\n * 快速连对判断（假设已排序）。\r\n */\r\nfunction isDoubleStraightFast(cards) { return isDoubleStraight(cards); }\r\n\r\n/**\r\n * 判断是否为长顺子（5个及以上）。\r\n */\r\nfunction isLongStraight(cards) { return isStraight(cards) && cards.length >= 5; }\r\n\r\n/**\r\n * 判断是否为长连对（6个及以上）。\r\n */\r\nfunction isLongDoubleStraight(cards) { return isDoubleStraight(cards) && cards.length >= 6; }\r\n\r\n/**\r\n * 根据黑桃5与出牌历史动态推断队友索引。\r\n *\r\n * 逻辑：优先检查玩家手牌中是否持有黑桃5；若未找到再检查出牌历史中谁打出过黑桃5。\r\n * 已知黑桃5持有者与庄家为一队。\r\n *\r\n * @param {number} playerIndex - 当前 AI 的玩家索引\r\n * @param {Array<Object>} players - 所有玩家信息数组\r\n * @param {Array<Object>} historyPlays - 出牌历史（每项可含 cards、name 等）\r\n * @returns {Array<number>} 返回推断出的队友索引数组（若无法确定返回空数组）\r\n */\r\nfunction getTeammateIndexesWithSpade5(playerIndex, isBankerList, historyPlays) {\r\n  // 1. 检查黑桃5是否已被打出\r\n  let spade5Owner = null;\r\n  // 仅使用公共信息：出牌历史\r\n  if (historyPlays && historyPlays.length) {\r\n    for (const play of historyPlays) {\r\n      if (play.cards && play.cards.some(card => card.suit === '♠' && card.value === '5')) {\r\n        // 找到打出黑桃5的玩家，优先使用历史记录的 playerIndex\r\n        if (typeof play.playerIndex === 'number') spade5Owner = play.playerIndex;\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  // 3. 如果能确定黑桃5持有者\r\n  if (spade5Owner !== null) {\r\n    // 庄家和黑桃5持有者为一队\r\n    const teammateIndexes = isBankerList\r\n      .map((flag, idx) => idx)\r\n      .filter(idx => (isBankerList[idx] || idx === spade5Owner) && idx !== playerIndex);\r\n    return teammateIndexes;\r\n  }\r\n  // 4. 否则，仅依据庄家信息确定队友（不窥视他人手牌）\r\n  return isBankerList\r\n    .map((flag, idx) => idx)\r\n    .filter(idx => isBankerList[idx] && idx !== playerIndex);\r\n}\r\n\r\n// 获取下一个玩家索引\r\nfunction getNextPlayerIndex(currentIndex, totalPlayers) {\r\n  return (currentIndex + 1) % totalPlayers;\r\n}\r\n\r\n\r\n","<template>\r\n  <div class=\"hand-outer\">\r\n    <div class=\"hand\" ref=\"myHand\" :style=\"{ width: handWidth + 'px' }\">\r\n      <span v-for=\"(card, i) in hand\" :key=\"i\"\r\n        :class=\"[{ selected: selectedIndexes.includes(i) }, getSuitClass(card.suit), 'card-item']\"\r\n        @click=\"toggleSelect(i)\"\r\n        :style=\"{\r\n          left: (i * 22) + 'px',\r\n          zIndex: i,\r\n        }\"\r\n      >\r\n        <span class=\"card-corner top-left\">\r\n          <span class=\"corner-value\" :class=\"getSuitClass(card.suit)\">{{ card.value }}</span>\r\n          <span class=\"corner-suit\" :class=\"getSuitClass(card.suit)\">{{ card.suit }}</span>\r\n        </span>\r\n        <span class=\"card-corner bottom-right\">\r\n          <span class=\"corner-value\" :class=\"getSuitClass(card.suit)\">{{ card.value }}</span>\r\n          <span class=\"corner-suit\" :class=\"getSuitClass(card.suit)\">{{ card.suit }}</span>\r\n        </span>\r\n      </span>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'CardHand',\r\n  props: {\r\n    hand: Array,\r\n    selectedIndexes: Array,\r\n    getSuitClass: Function\r\n  },\r\n  emits: ['toggleSelect'],\r\n  computed: {\r\n    handWidth() {\r\n      // 44px为单牌宽度，22px为重叠宽度\r\n      if (!this.hand || this.hand.length === 0) return 0;\r\n      if (this.hand.length === 1) return 44;\r\n      return 44 + (this.hand.length - 1) * 22;\r\n    }\r\n  },\r\n  methods: {\r\n    toggleSelect(i) {\r\n      this.$emit('toggleSelect', i);\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.hand-outer {\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: flex-end;\r\n}\r\n.hand {\r\n  margin: 8px 0;\r\n  min-height: 70px;\r\n  min-width: 44px;\r\n  position: relative;\r\n  height: 90px;\r\n}\r\n.card-item {\r\n  cursor: pointer;\r\n  user-select: none;\r\n  position: absolute;\r\n  top: 0;\r\n  width: 44px;\r\n  height: 70px;\r\n  text-align: left;\r\n  box-shadow: 0 2px 8px #bbb;\r\n  transition: all .2s;\r\n  border-radius: 7px;\r\n  background: #fff;\r\n  border: 1.5px solid #e0e0e0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n  padding: 0;\r\n}\r\n.card-corner {\r\n  position: absolute;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  font-size: 15px;\r\n  line-height: 1;\r\n  font-family: 'Arial', sans-serif;\r\n}\r\n.top-left {\r\n  top: 4px;\r\n  left: 5px;\r\n  text-align: left;\r\n}\r\n.bottom-right {\r\n  bottom: 4px;\r\n  right: 5px;\r\n  text-align: right;\r\n  align-items: flex-end;\r\n}\r\n.corner-value {\r\n  font-weight: bold;\r\n  font-size: 15px;\r\n  line-height: 1;\r\n}\r\n.corner-suit {\r\n  font-size: 13px;\r\n  margin-top: 1px;\r\n}\r\n.hand .selected { background: #ffe082; box-shadow: 0 2px 8px #ffd54f; border: 2px solid #ffb300; }\r\n.red-suit { color: #e53935; }\r\n.black-suit { color: #222; }\r\n.club-suit { color: #388e3c; }\r\n</style>\r\n","import { render } from \"./CardHand.vue?vue&type=template&id=65454eae&scoped=true\"\nimport script from \"./CardHand.vue?vue&type=script&lang=js\"\nexport * from \"./CardHand.vue?vue&type=script&lang=js\"\n\nimport \"./CardHand.vue?vue&type=style&index=0&id=65454eae&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/.pnpm/vue-loader@17.4.2_@vue+comp_f734b6141fecf191fd429c9851a327a4/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-65454eae\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"recorder\">\r\n    <div class=\"recorder-title\">记牌器</div>\r\n    <div class=\"recorder-cards\">\r\n      <div class=\"recorder-row\">\r\n        <span v-for=\"v in cardOrder\" :key=\"v\" class=\"recorder-num\">{{ v }}</span>\r\n      </div>\r\n      <div class=\"recorder-row\">\r\n        <span v-for=\"v in cardOrder\" :key=\"v\" class=\"recorder-count\">{{ getCardLeftCount(players, v) }}</span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getCardLeftCount } from '../game/recorder';\r\nimport { CARD_ORDER } from '../game/card';\r\nexport default {\r\n  // eslint-disable-next-line vue/multi-word-component-names\r\n  name: 'Recorder',\r\n  props: {\r\n    players: Array,\r\n    cardOrder: {\r\n      type: Array,\r\n      default: () => CARD_ORDER\r\n    }\r\n  },\r\n  methods: { getCardLeftCount }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.recorder { margin-top: 0; background: #fffbe7; border-radius: 8px; padding: 10px 16px; box-shadow: 0 1px 4px #ffe082; display: inline-block; }\r\n.recorder-title { font-weight: bold; color: #bfa100; margin-bottom: 4px; }\r\n.recorder-cards { display: flex; flex-direction: column; align-items: flex-start; }\r\n.recorder-row { display: flex; flex-direction: row; gap: 8px; margin-bottom: 2px; }\r\n.recorder-num { font-size: 18px; font-weight: bold; min-width: 32px; text-align: center; color: #333; }\r\n.recorder-count { background: #ffd54f; color: #222; border-radius: 8px; padding: 1px 0; font-weight: bold; min-width: 32px; text-align: center; font-size: 15px; margin-bottom: 2px; }\r\n/* 顶部记牌器样式 */\r\n.recorder-top-bar {\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: flex-start;\r\n  margin-bottom: 8px;\r\n}\r\n.recorder-top-bar .recorder {\r\n  transform: scale(0.85);\r\n  transform-origin: top center;\r\n}\r\n</style>\r\n","/**\r\n * 获取某点数在其他玩家手牌中的剩余数量\r\n * 记牌器统计：其他玩家剩余牌值的个数\r\n * @param {*} players 所有玩家的手牌信息\r\n * @param {*} value 判断的牌值\r\n * @returns \r\n */\r\nexport function getCardLeftCount(players, value) {\r\n  let count = 0;\r\n  for (let i = 1; i < players.length; i++) {\r\n    count += players[i].hand.filter(c => c.value === value).length;\r\n  }\r\n  return count;\r\n}\r\n","import { render } from \"./Recorder.vue?vue&type=template&id=324b625c&scoped=true\"\nimport script from \"./Recorder.vue?vue&type=script&lang=js\"\nexport * from \"./Recorder.vue?vue&type=script&lang=js\"\n\nimport \"./Recorder.vue?vue&type=style&index=0&id=324b625c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/.pnpm/vue-loader@17.4.2_@vue+comp_f734b6141fecf191fd429c9851a327a4/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-324b625c\"]])\n\nexport default __exports__","import { render } from \"./GameTable.vue?vue&type=template&id=08e32bee&scoped=true\"\nimport script from \"./GameTable.vue?vue&type=script&lang=js\"\nexport * from \"./GameTable.vue?vue&type=script&lang=js\"\n\nimport \"./GameTable.vue?vue&type=style&index=0&id=08e32bee&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/.pnpm/vue-loader@17.4.2_@vue+comp_f734b6141fecf191fd429c9851a327a4/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-08e32bee\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"test-table\">\r\n    <div>\r\n      <span>Selected Cards:</span>\r\n      <input type=\"input\" v-model=\"selectedCards\" placeholder=\"如: 7,7 或 ♠7,♥7\" />\r\n    </div>\r\n    <div>\r\n      <span>Last Cards:</span>\r\n      <input type=\"input\" v-model=\"lastCards\" placeholder=\"如: 6,6 或 ♣6,♦6\" />\r\n    </div>\r\n    <button @click=\"testPlay\">Test Play</button>\r\n    <div v-if=\"result !== null\" style=\"margin-top:8px;\">\r\n      <div>Is valid: {{ result }}</div>\r\n      <div>Selected Type: {{ selType }}</div>\r\n      <div>Last Type: {{ lastType }}</div>\r\n    </div>\r\n    <div style=\"margin-top:12px;\">\r\n      <button @click=\"runSamples\">Run Samples</button>\r\n      <div v-if=\"sampleResults.length\" style=\"margin-top:6px;\">\r\n        <div v-for=\"(r, idx) in sampleResults\" :key=\"idx\">{{ idx+1 }}. {{ r.selected }} | {{ r.last }} => {{ r.actual }} (expect {{ r.expect }})</div>\r\n      </div>\r\n    </div>\r\n    <div style=\"margin-top:12px;\">\r\n      <span>Type Cards:</span>\r\n      <input type=\"input\" v-model=\"typeCards\" placeholder=\"如: 6,7,8 或 7,7\" />\r\n      <button @click=\"checkType\">Check Type</button>\r\n      <div v-if=\"typeResult\" style=\"margin-top:6px;\">Type: {{ typeResult }}</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport { isValidPlay, getCardType } from '../game/rules';\r\n\r\nexport default {\r\n  name: 'TestTable',\r\n  created() {\r\n    \r\n  },\r\n  data() {\r\n    return {\r\n      selectedCards: '',\r\n      lastCards: '',\r\n      result: null,\r\n      selType: '',\r\n      lastType: '',\r\n      sampleResults: [],\r\n      typeCards: '',\r\n      typeResult: ''\r\n    };\r\n  },\r\n  methods: {\r\n    parseInput(str) {\r\n      const suitMap = { 'S': '♠', 'H': '♥', 'C': '♣', 'D': '♦' };\r\n      return (str || '')\r\n        .split(',')\r\n        .map(s => s.trim())\r\n        .filter(s => s.length > 0)\r\n        .map(tok => {\r\n          const m = tok.match(/^([♠♥♣♦]|[SHCD])?\\s*(10|[4-9]|[JQKA]|2|3|5)$/i);\r\n          if (!m) return null;\r\n          const suit = m[1] ? (suitMap[m[1].toUpperCase()] || m[1]) : '♠';\r\n          const val = m[2].toUpperCase();\r\n          return { suit, value: val };\r\n        })\r\n        .filter(Boolean);\r\n    },\r\n    testPlay() {\r\n      const sc = this.parseInput(this.selectedCards);\r\n      const lc = this.parseInput(this.lastCards);\r\n      const res = isValidPlay(sc, lc);\r\n      this.result = res;\r\n      this.selType = getCardType(sc);\r\n      this.lastType = getCardType(lc);\r\n    },\r\n    formatType(t) {\r\n      const map = {\r\n        single: '单张',\r\n        pair: '对子',\r\n        triple: '轰',\r\n        bomb: '炸',\r\n        straight: '顺子',\r\n        doubleStraight: '连对',\r\n        invalid: '无效'\r\n      };\r\n      return map[t] || t;\r\n    },\r\n    checkType() {\r\n      const cards = this.parseInput(this.typeCards);\r\n      const t = getCardType(cards);\r\n      this.typeResult = this.formatType(t);\r\n    },\r\n    runSamples() {\r\n      const samples = [\r\n        { selected: '7', last: '', expect: true },\r\n        { selected: '8', last: '7', expect: true },\r\n        { selected: '7', last: '7', expect: false },\r\n        { selected: '8,8', last: '7,7', expect: true },\r\n        { selected: '7,7', last: '7,7', expect: false },\r\n        { selected: '6,7,8', last: '4,6,7', expect: true },\r\n        { selected: 'K,A', last: 'Q,K', expect: true },\r\n        { selected: 'A,2', last: 'K,A', expect: false },\r\n        { selected: '7,7,7', last: 'K', expect: true },\r\n        { selected: '7,7,7', last: '7,7,7,7', expect: false },\r\n        { selected: '9,9,9', last: '7,7,7', expect: true }\r\n      ];\r\n      this.sampleResults = samples.map(s => {\r\n        const sc = this.parseInput(s.selected);\r\n        const lc = this.parseInput(s.last);\r\n        const actual = isValidPlay(sc, lc);\r\n        return { ...s, actual };\r\n      });\r\n    }\r\n  }\r\n  \r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* 新增顶部容器样式 */\r\n.top-container {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100vw;\r\n  z-index: 30;\r\n}\r\n/**** 桌面端基础样式 ****/\r\n\r\n\r\n.top-container {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100vw;\r\n  z-index: 30;\r\n}\r\n/**** 桌面端基础样式 ****/\r\n.test-table {\r\n  display: flex;\r\n  flex-direction: column;\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  background: #f8fafc;\r\n  overflow: hidden;\r\n  z-index: 9;\r\n}\r\n.players { display: flex; justify-content: space-around; margin-bottom: 20px; flex-wrap: wrap; }\r\n.ai-row-on-top {\r\n  width: 100vw;\r\n  display: flex;\r\n  justify-content: center;\r\n  padding-top: 0;\r\n  padding-bottom: 4px;\r\n  background: #f8fafc;\r\n}\r\n.ai-block-wrap {\r\n  display: flex;\r\n  flex-direction: row;\r\n  gap: 16px;\r\n  justify-content: center;\r\n  width: auto;\r\n  background: transparent;\r\n  pointer-events: auto;\r\n}\r\n.ai-block-wrap {\r\n  display: flex;\r\n  flex-direction: row;\r\n  gap: 8px;\r\n  justify-content: center;\r\n  width: 100%;\r\n}\r\n.player-tab {\r\n  min-width: 68px;\r\n  max-width: 90px;\r\n  background: #f8fafc; /* 与记牌器背景一致 */\r\n  border-radius: 6px;\r\n  padding: 4px 4px 2px 4px;\r\n  box-shadow: 0 1px 2px #eee;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  border: 2px solid #d0d0d0;\r\n  transition: border 0.2s, background 0.2s, box-shadow 0.2s;\r\n  font-size: 13px;\r\n  line-height: 1.1;\r\n}\r\n.player-tab.me {\r\n  font-weight: bold;\r\n}\r\n.player-tab.active {\r\n  border: 2px solid #42b983;\r\n  background: #e3f9f1;\r\n  box-shadow: 0 2px 8px #b2f2e5;\r\n}\r\n.player-label {\r\n  font-size: 14px;\r\n  margin-bottom: 1px;\r\n}\r\n.player-hand-count {\r\n  color: #888;\r\n  font-size: 12px;\r\n  margin-top: 1px;\r\n}\r\n.player.me { border: 2px solid #42b983; padding: 10px; border-radius: 8px; background: #e3f9f1; }\r\n.hand { margin: 8px 0; min-height: 38px; }\r\n.hand .selected {\r\n  background: #ffe082;\r\n  border-radius: 4px;\r\n  padding: 2px 4px;\r\n  box-shadow: 0 2px 8px #ffd54f;\r\n  border: 1.5px solid #ffb300;\r\n}\r\n.red-suit { color: #e53935; }\r\n.black-suit { color: #222; }\r\n.club-suit { color: #388e3c; }\r\n.suit-symbol { font-size: 18px; font-weight: bold; margin-right: 1px; }\r\n.ai-block { background: #f3f3f3; border-radius: 8px; padding: 8px 12px; margin: 0 4px; min-width: 90px; box-shadow: 0 1px 4px #eee; }\r\n.ai-title { font-weight: bold; color: #888; margin-bottom: 4px; }\r\n.ai-hand { color: #666; }\r\n.current-play { font-size: 14px; margin-bottom: 4px; }\r\n.current-turn { font-size: 13px; }\r\n.current-turn .me { color: #42b983; font-weight: bold; }\r\n.winner-modal { position: fixed; left: 0; top: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.18); display: flex; align-items: center; justify-content: center; z-index: 100; }\r\n.winner-content { background: #fff; border-radius: 12px; padding: 32px 40px; box-shadow: 0 4px 24px #bbb; text-align: center; font-size: 22px; }\r\n.winner-content button { margin-top: 18px; font-size: 18px; background: #42b983; color: #fff; border: none; border-radius: 6px; padding: 8px 24px; cursor: pointer; }\r\n/* 底部手牌与操作区固定样式 */\r\n.bottom-bar {\r\n  position: fixed;\r\n  left: 0;\r\n  bottom: 0;\r\n  width: 100vw;\r\n  background: #f8fafc;\r\n  box-shadow: 0 -2px 12px #e0e0e0;\r\n  z-index: 10;\r\n  padding: 2px 0 2px 0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n.bottom-bar .actions {\r\n  margin-top: 2px;\r\n}\r\n\r\n\r\n/* 统一卡片样式，完全同步 CardHand.vue 的 .card-item 及相关样式 */\r\n.card-item {\r\n  user-select: none;\r\n  position: relative;\r\n  width: 44px;\r\n  height: 70px;\r\n  text-align: left;\r\n  box-shadow: 0 2px 8px #bbb;\r\n  transition: all .2s;\r\n  border-radius: 7px;\r\n  background: #fff;\r\n  border: 1.5px solid #cccccc;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n  padding: 0;\r\n}\r\n.card-corner {\r\n  position: absolute;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  font-size: 15px;\r\n  line-height: 1;\r\n  font-family: 'Arial', sans-serif;\r\n}\r\n.top-left {\r\n  top: 4px;\r\n  left: 5px;\r\n  text-align: left;\r\n}\r\n.bottom-right {\r\n  bottom: 4px;\r\n  right: 5px;\r\n  text-align: right;\r\n  align-items: flex-end;\r\n}\r\n.corner-value {\r\n  font-weight: bold;\r\n  font-size: 15px;\r\n  line-height: 1;\r\n}\r\n.corner-suit {\r\n  font-size: 13px;\r\n  margin-top: 1px;\r\n}\r\n.red-suit { color: #e53935; }\r\n.black-suit { color: #222; }\r\n.club-suit { color: #388e3c; }\r\n\r\n/* 出牌记录滚动区域 */\r\n.table-center {\r\n  flex-grow: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n  padding: 10px;\r\n  margin-top: 80px;\r\n  height: 100%;\r\n  margin-bottom: 336px; /* 增加下边距 */\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.current-play.history-scroll {\r\n  flex-grow: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  border-radius: 8px;\r\n  padding: 10px 0;\r\n  height: 100%;\r\n  /* 添加滚动行为平滑过渡 */\r\n  scroll-behavior: smooth;\r\n}\r\n\r\n.history-list {\r\n  flex-grow: 1;\r\n  overflow-y: auto;\r\n  min-height: 0;\r\n}\r\n.history-item {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 2px;\r\n  font-size: 13px;\r\n}\r\n.history-name {\r\n  font-weight: bold;\r\n  margin-right: 4px;\r\n}\r\n.history-cards {\r\n  display: flex;\r\n  flex-direction: row;\r\n  gap: 4px;\r\n  align-items: center;\r\n}\r\n.history-pass {\r\n  color: #aaa;\r\n  margin-left: 2px;\r\n}\r\n\r\n@media (max-width: 600px) {\r\n  .game-table {\r\n    padding: 2px;\r\n    border-radius: 0;\r\n    box-shadow: none;\r\n    max-width: 100vw;\r\n    min-height: 100vh;\r\n    padding-top: 60px; /* 顶部记牌器高度适配，略大 */\r\n  }\r\n  .recorder-top-bar {\r\n    align-items: flex-start;\r\n    margin-bottom: 0;\r\n    padding: 0;\r\n    justify-content: center;\r\n    min-height: unset;\r\n    height: auto;\r\n    background: #f8fafc;\r\n    box-shadow: 0 1px 4px #e0e0e0;\r\n    overflow: visible;\r\n  }\r\n  .recorder-top-inner {\r\n    transform: scale(0.7);\r\n    transform-origin: top center;\r\n    margin-top: 0;\r\n    padding: 0;\r\n    height: auto;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    overflow: visible;\r\n    min-width: max-content;\r\n  }\r\n  .players {\r\n    flex-direction: column;\r\n    align-items: stretch;\r\n    margin-bottom: 6px;\r\n    gap: 4px;\r\n  }\r\n  .ai-block {\r\n    min-width: 0;\r\n    font-size: 13px;\r\n    padding: 4px 2px;\r\n    margin: 1px 0;\r\n  }\r\n  .hand {\r\n    min-height: 22px;\r\n    font-size: 13px;\r\n  }\r\n  .hand .selected {\r\n    background: #ffe082;\r\n    border-radius: 4px;\r\n    padding: 2px 4px;\r\n    box-shadow: 0 2px 8px #ffd54f;\r\n    border: 1.5px solid #ffb300; /* 保持选中状态的边框样式不变 */\r\n  }\r\n  .suit-symbol {\r\n    font-size: 13px;\r\n  }\r\n  .current-play, .current-turn {\r\n    font-size: 13px;\r\n  }\r\n  .winner-content {\r\n    padding: 10px 4px;\r\n    font-size: 15px;\r\n  }\r\n  .winner-content button {\r\n    font-size: 13px;\r\n    padding: 4px 8px;\r\n  }\r\n  .bottom-bar {\r\n    padding: 2px 0 2px 0;\r\n    bottom: 0;\r\n    min-height: 54px;\r\n  }\r\n  .bottom-bar .actions {\r\n    margin-top: 2px;\r\n  }\r\n  .bottom-bar button {\r\n    font-size: 14px;\r\n    padding: 4px 10px;\r\n  }\r\n  .history-scroll {\r\n    max-height: 460px;\r\n    padding: 2px 2px;\r\n    font-size: 12px;\r\n    touch-action: none;\r\n  }\r\n  .fixed-play-info {\r\n    height: 60px; /* 移动端高度从90px减小到60px */\r\n    bottom: 145px;\r\n    padding: 5px 0;\r\n  }\r\n}\r\n/* 让顶部记牌器样式居中 */\r\n.recorder-top-bar {\r\n  width: 100vw;\r\n  height: 80px;\r\n  display: flex;\r\n  justify-content: center;\r\n  background: #f8fafc;\r\n  box-shadow: 0 2px 8px #e0e0e0;\r\n  overflow: visible;\r\n}\r\n.recorder-top-inner {\r\n  margin: 0 auto;\r\n  padding: 8px 0 0 0;\r\n  overflow: visible;\r\n}\r\n/* 出牌区样式 */\r\n.current-play-area {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  margin-bottom: 6px;\r\n}\r\n.play-area-label {\r\n  font-size: 13px;\r\n  color: #888;\r\n  margin-bottom: 2px;\r\n}\r\n.play-area-cards {\r\n  display: flex;\r\n  flex-direction: row;\r\n  gap: 4px;\r\n  min-height: 32px;\r\n  align-items: center;\r\n}\r\n.play-pass {\r\n  color: #aaa;\r\n  font-size: 15px;\r\n  padding: 0 8px;\r\n}\r\n/* 禁止页面整体滚动，防止抖动和内容被遮挡 */\r\n:global(html), :global(body) {\r\n  height: 100vh;\r\n  overflow: hidden;\r\n}\r\n\r\n/* 固定区域样式 */\r\n.fixed-play-info {\r\n  position: fixed;\r\n  bottom: 120px; /* 位于手牌区域上方 */\r\n  left: 0;\r\n  width: 100vw;\r\n  height: 130px; /* 高度从100px减小到70px */\r\n  background: #f8fafc;\r\n  padding: 8px 0;\r\n  box-shadow: 0 -2px 10px rgba(0,0,0,0.05);\r\n  z-index: 9; /* 确保在手牌区域上方但在顶部容器下方 */\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n.hand-tooltip-debug {\r\n  pointer-events: none;\r\n  min-width: 120px;\r\n  min-height: 80px;\r\n  position: fixed;\r\n}\r\n</style>\r\n","import { render } from \"./TestTable.vue?vue&type=template&id=5f71be02&scoped=true\"\nimport script from \"./TestTable.vue?vue&type=script&lang=js\"\nexport * from \"./TestTable.vue?vue&type=script&lang=js\"\n\nimport \"./TestTable.vue?vue&type=style&index=0&id=5f71be02&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/.pnpm/vue-loader@17.4.2_@vue+comp_f734b6141fecf191fd429c9851a327a4/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5f71be02\"]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=f8fe525c\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=f8fe525c&lang=css\"\n\nimport exportComponent from \"../node_modules/.pnpm/vue-loader@17.4.2_@vue+comp_f734b6141fecf191fd429c9851a327a4/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from 'vue'\nimport App from './App.vue'\n\ncreateApp(App).mount('#app')\n\n// 禁止双击放大\nif (typeof window !== 'undefined') {\n  document.addEventListener('dblclick', function(e) {\n    e.preventDefault();\n  }, { passive: false });\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkjihei5\"] = self[\"webpackChunkjihei5\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(492); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["id","_createElementBlock","_hoisted_1","$data","showGame","onClick","_cache","$event","showTest","_createBlock","_component_GameTable","key","_component_TestTable","class","ref","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_createVNode","_component_Recorder","players","cardOrder","_hoisted_5","_hoisted_6","_Fragment","_renderList","player","idx","_normalizeClass","active","currentTurn","me","$options","toggleHand","_hoisted_8","_toDisplayString","name","_hoisted_9","hand","length","_hoisted_10","_hoisted_11","historyPlays","_hoisted_12","item","_hoisted_13","cards","_hoisted_14","c","cidx","getSuitClass","suit","_hoisted_15","value","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","currentPlay","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","args","playCards","disabled","canPlay","_hoisted_27","pass","canPass","_hoisted_28","_component_CardHand","selectedIndexes","onToggleSelect","toggleSelect","winner","_hoisted_29","_hoisted_30","startGame","hoverHandIdx","style","_normalizeStyle","hoverHandStyle","SUITS","CARD_ORDER","STRAIGHT_CARD_ORDER","createDeck","deck","push","shuffle","i","j","Math","floor","random","deal","hands","sort","a","b","indexOf","SINGLE","PAIR","TRIPLE","BOMB","STRAIGHT","DOUBLE_STRAIGHT","INVALID","compareCard","isValidPlay","selectedCards","lastCards","type","getCardType","lastType","sortedSel","sortCards","sortedLast","slice","isStraight","isDoubleStraight","isPair","isTriple","isBomb","idxs","map","includes","sorted","curr","prev","getPlayedCards","myHand","played","play","getRemainingCards","values","allCards","playedSet","Set","filter","has","selectSmallestSingle","singles","selectSmallestPair","pairs","selectSmallestStraight","list","A","B","determineStyle","handCounts","playerIndex","playNumber","isBankerList","round","teammateIndexes","getTeammateIndexesWithSpade5","nextPlayerIdx","getNextPlayerIndex","nextPlayerHandCount","some","computeKeyCount","remainingCards","keyValues","keyCount","bomb","triple","valueMap","v","splitCombos","handSize","combos","getOptimalCombos","triples","bombs","straights","isStraightFast","doubleStraights","isDoubleStraightFast","getLastTurnInfo","wonLastTurn","lastNonEmptyPlay","p","foundLaterNonEmpty","p2","safeSets","sets","avoidPlay","avoidIfBeats","arr","isOpponentThreat","nextIsTeammate","nextCount","top","leftCount","pickTeamPlay","params","lastOwnerIsTeammate","lastOwnerHandCount","safe","threat","protect","respondWithLastCards","s","st","ds","teamSafeSingles","teamSafePairs","teamSafeStraights","every","teamSafeDoubleStraights","teamSafeTriples","pickAggressivePlay","aggrSafeStraights","aggrSafeDoubleStraights","aggrSafeTriples","aggrSafePairs","aggrSafeSingles","t","isLongStraight","isLongDoubleStraight","wouldBreakOptimalCombo","leadConservativeOrNormal","non2","find","nonA","nonBomb","aiPlay","lastOwnerIdx","pick","combo","optimalCombos","optimal","card","arraysEqual","usedCards","findBombs","forEach","add","findTriples","findStraights","findDoubleStraights","findPairs","findSingles","len","hasRepeatedSuit","hasUsedCards","suits","spade5Owner","flag","currentIndex","totalPlayers","width","handWidth","$props","selected","props","Array","Function","emits","computed","this","methods","$emit","__exports__","getCardLeftCount","count","default","components","CardHand","Recorder","created","isAI","isBanker","team","data","watch","handler","$nextTick","$refs","historyList","requestAnimationFrame","scrollTop","scrollHeight","deep","lastValid","getLastValidPlay","hasBlackFive","outCards","splice","checkWinner","nextTurn","alert","ai","setTimeout","sel","hideHand","showHand","position","left","transform","zIndex","background","border","padding","boxShadow","borderRadius","minWidth","minHeight","handleBodyClick","evt","tooltip","$el","querySelector","tabs","querySelectorAll","contains","target","from","tab","mounted","document","body","addEventListener","beforeUnmount","removeEventListener","placeholder","testPlay","result","selType","runSamples","sampleResults","r","last","actual","expect","typeCards","checkType","typeResult","parseInput","str","suitMap","split","trim","tok","m","match","toUpperCase","val","Boolean","sc","lc","res","formatType","single","pair","straight","doubleStraight","invalid","samples","GameTable","TestTable","render","createApp","App","mount","window","e","preventDefault","passive","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","call","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","Object","keys","n","getter","__esModule","d","definition","o","defineProperty","enumerable","get","g","globalThis","obj","prop","prototype","hasOwnProperty","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}